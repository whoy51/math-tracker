{% extends "base.html" %}

{% block content %}

<h1>Admin Panel</h1>

<p>Password: {{ password }}</p>

<p>Click below to change the access key</p>

<form action="" method="post">
    <p>
        {{ form.submit() }}
    </p>
</form>

<button id="copy-button" onclick="copyToClipboard()">Copy Text</button>

<script>
    function copyToClipboard() {
        var textToCopy = "{{ password }}";

        navigator.clipboard.writeText(textToCopy)
            .then(function() {
                const p = document.createElement("p");
                p.innerHTML = "Copied to clipboard!";
                document.body.appendChild(p);
                setTimeout(function() {
                    p.remove();
                }, 1800);
            })
            .catch(function(error) {
                alert("Failed to copy text to clipboard: " + error);
            });
    }
</script>

{% endblock %}